<!--pages/forscreen/forfile/files.wxml-->
<import src="/pages/template/commons" />


<view class="container flex_column_center_flexStart theme-container" style='height: calc(100vh - 46px - {{statusBarHeight}}px);'>
	<view class="page-top theme-panel-2">
		<view class='full_width flex_row_center_spaceBetween font_666666_26'>
			<label class='tip_top_lable'>所有投屏文件，投屏结束后自动销毁</label>
			<label class='link_relief'>
				<navigator bindtap="goRelief" url="/pages/commons/relief">免责声明</navigator>
			</label>
		</view>
	</view>
	<view class="page-main">
		<scroll-view class="file-list" scroll-into-view="{{toView}}" scroll-y="true" scroll-with-animation="true">
			<view class="weui-grids pic-platform">
				<block wx:for="{{file_imgs}}" wx:key="key" wx:for-item="bean" wx:for-index="index">
					<view id="list{{index}}" wx:if="{{pos_id == index}}" class="weui-grid pic-frame choose" bindtap="appointPic" data-forscreen_id="{{forscreen_id}}" data-forscreen_img="{{bean}}" data-pos_id="{{index}}">
						<image src="{{oss_host}}/{{bean}}{{oss_suffix}}"></image>
						<view class="cover theme-font4">
							<image src="/images/icon/1CBEB6_right-triangle.png"></image>
							<label class="page-number">{{index+1}}</label>
						</view>
					</view>
					<view wx:if="{{pos_id != index}}" class="weui-grid pic-frame" bindtap="appointPic" data-forscreen_id="{{forscreen_id}}" data-forscreen_img="{{bean}}" data-pos_id="{{index}}">
						<image src="{{oss_host}}/{{bean}}{{oss_suffix}}"></image>
						<view class="cover theme-font1">
							<image src="/images/icon/FFFFFF_right-triangle.png"></image>
							<label class="page-number">{{index+1}}</label>
						</view>
					</view>
				</block>

			</view>
		</scroll-view>
		<view class="operation flex_row_center_center theme-panel-2">
			<button class="rechoose theme-button-welcome" bindtap="reChooseFile">重选文件</button>
			<button class="quit theme-button-welcome-dark" bindtap="exitForscreend" data-openid="{{openid}}" data-box_mac="{{box_mac}}">退出投屏</button>
			<button class="previous flex_column_center_center font_333333_24" bindtap="changePic" data-action="1" data-file_imgs="{{file_imgs}}" data-pos_id="{{pos_id}}" data-forscreen_id="{{forscreen_id}}">
				<label class="fa fa-chevron-circle-left"></label>
				<label>播放上一页</label>
			</button>
			<button class="next flex_column_center_center font_333333_24" bindtap="changePic" data-action="2" data-file_imgs="{{file_imgs}}" data-pos_id="{{pos_id}}" data-forscreen_id="{{forscreen_id}}">
				<label class="fa fa-chevron-circle-right"></label>
				<label>播放下一页</label>
			</button>
		</view>
	</view>
	<view class="page-bottom"></view>
</view>

<view class="body-view">
	<loading hidden="{{hiddens}}" bindchange="loadingChange">投屏文件处理中，请稍后!</loading>
</view>